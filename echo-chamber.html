<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chambre d'écho</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        .back-button::before {
            content: '';
            width: 8px;
            height: 8px;
            border-left: 2px solid rgba(0, 0, 0, 0.8);
            border-bottom: 2px solid rgba(0, 0, 0, 0.8);
            transform: rotate(45deg) translateX(1px);
        }

        .language-selector {
            position: absolute;
            right: 20px;
            top: 20px;
            z-index: 200;
        }

        .language-button {
            background: transparent;
            border: 1px solid #9F7AEA;
            color: #9F7AEA;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .language-button:hover {
            background: rgba(159, 122, 234, 0.1);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #9F7AEA;
            border-radius: 3px;
            padding: 5px 0;
            min-width: 120px;
            display: none;
            backdrop-filter: blur(10px);
        }

        .language-selector:hover .language-dropdown {
            display: block;
        }

        .language-dropdown a {
            display: block;
            padding: 8px 15px;
            color: #ffffff;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .language-dropdown a:hover {
            background: rgba(159, 122, 234, 0.1);
            color: #9F7AEA;
        }

        .title {
            position: fixed;
            top: 20px;
            left: 90px;
            font-size: 32px;
            font-weight: 300;
            color: #000;
            z-index: 2;
            background: none;
            padding: 10px 15px;
            letter-spacing: -0.5px;
            text-transform: uppercase;
            font-family: 'Space Grotesk', sans-serif;
        }

        .logo-container {
            text-align: center;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        .logo {
            width: 60vw;
            height: 60vh;
            cursor: pointer;
            transition: all 0.3s ease;
            object-fit: contain;
        }

        .logo:hover {
            transform: scale(1.02);
            filter: brightness(1.05);
        }

        .main-content {
            padding: 20px;
        }

        .description {
            text-align: center;
            margin: 40px 0;
            font-size: 18px;
        }

        .content {
            display: flex;
            justify-content: center;
            margin-top: 60px;
            padding: 0 20px;
            width: 100%;
        }

        .video-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .video {
            width: 100%;
            max-width: 1200px;
            transition: all 0.3s ease;
        }

        .video.small {
            max-width: 800px;
        }

        .arrow {
            position: absolute;
            right: -50px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            cursor: pointer;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .arrow:hover {
            opacity: 1;
        }

        .gallery {
            margin-top: 100px;
            overflow: hidden;
            position: relative;
            height: 400px;
            margin-bottom: 100px;
        }

        .gallery-container {
            display: flex;
            position: absolute;
            animation: slide 240s linear infinite;
            gap: 200px;
        }

        .gallery img {
            height: 400px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .gallery img:hover {
            transform: scale(1.05);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal img {
            max-width: 90%;
            max-height: 90vh;
            object-fit: contain;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        @keyframes slide {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(calc(-100% - 200px));
            }
        }

        .credits {
            text-align: center;
            margin: 30px 0;
            font-size: 16px;
            color: #333;
        }

        .project-description {
            max-width: 900px;
            margin: 80px auto 40px auto;
            padding: 0 20px;
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            text-align: justify;
            font-family: 'Space Grotesk', sans-serif;
        }

        .project-description p {
            margin: 0 0 20px 0;
        }

        .project-description p:last-child {
            margin-bottom: 0;
        }

        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2;
            background: none;
            border: none;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            color: #000;
            cursor: pointer;
            padding: 5px 10px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .language-selector:hover {
            opacity: 1;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 30px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .scroll-arrow {
            font-size: 20px;
            background: linear-gradient(45deg, #333, #666, #999, #666, #333);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        .scroll-arrow.left {
            animation-delay: 0s;
        }

        .scroll-arrow.center {
            animation-delay: 0.75s;
        }

        .scroll-arrow.right {
            animation-delay: 1.5s;
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .logo-container:hover .scroll-indicator {
            opacity: 0.6;
        }

        /* Responsive pour mobile - Version complète */
        @media (max-width: 768px) {
            /* Bouton retour mobile */
            .back-button {
                width: 35px;
                height: 35px;
                top: 20px;
                left: 20px;
            }

            .back-button::before {
                width: 7px;
                height: 7px;
            }

            /* Titre mobile */
            .title {
                font-size: 24px;
                top: 15px;
                left: 70px;
                padding: 8px 12px;
            }

            /* Sélecteur de langue mobile */
            .language-selector {
                top: 15px;
                right: 15px;
            }

            .language-button {
                padding: 4px 8px;
                font-size: 0.8rem;
            }

            /* Contenu mobile */
            .content-section {
                padding: 2rem 1rem;
                margin-top: 80px;
            }

            /* Grille d'images mobile */
            .image-gallery {
                gap: 2rem;
            }

            .image-container {
                border-radius: 12px;
                overflow: hidden;
            }

            .image-container img {
                width: 100%;
                height: auto;
                border-radius: 12px;
            }

            .image-container.side-by-side {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .image-container.side-by-side img.large {
                grid-column: 1;
            }

            /* Description mobile */
            .description {
                font-size: 1rem;
                line-height: 1.6;
                padding: 1.5rem;
                border-radius: 12px;
                margin: 1.5rem 0;
            }

            /* Crédits mobile */
            .credits {
                font-size: 0.9rem;
                padding: 1.5rem;
                border-radius: 12px;
                margin: 2rem 0;
            }

            /* Description du projet mobile */
            .project-description {
                gap: 1.5rem;
            }

            .project-description p {
                font-size: 1rem;
                line-height: 1.7;
                padding: 1.5rem;
                border-radius: 12px;
            }
        }

        @media (max-width: 480px) {
            /* Bouton retour très mobile */
            .back-button {
                width: 30px;
                height: 30px;
                top: 15px;
                left: 15px;
            }

            .back-button::before {
                width: 6px;
                height: 6px;
            }

            /* Titre très mobile */
            .title {
                font-size: 20px;
                top: 10px;
                left: 55px;
                padding: 6px 10px;
            }

            /* Sélecteur de langue très mobile */
            .language-selector {
                top: 10px;
                right: 10px;
            }

            .language-button {
                padding: 3px 6px;
                font-size: 0.75rem;
            }

            /* Contenu très mobile */
            .content-section {
                padding: 1.5rem 0.8rem;
                margin-top: 70px;
            }

            /* Grille d'images très mobile */
            .image-gallery {
                gap: 1.5rem;
            }

            .image-container {
                border-radius: 10px;
            }

            .image-container img {
                border-radius: 10px;
            }

            /* Description très mobile */
            .description {
                font-size: 0.95rem;
                line-height: 1.5;
                padding: 1.2rem;
                border-radius: 10px;
                margin: 1.2rem 0;
            }

            /* Crédits très mobile */
            .credits {
                font-size: 0.85rem;
                padding: 1.2rem;
                border-radius: 10px;
                margin: 1.5rem 0;
            }

            /* Description du projet très mobile */
            .project-description {
                gap: 1.2rem;
            }

            .project-description p {
                font-size: 0.95rem;
                line-height: 1.6;
                padding: 1.2rem;
                border-radius: 10px;
            }
        }

        /* Orientation paysage sur mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .content-section {
                margin-top: 60px;
                padding: 1rem;
            }

            .image-gallery {
                gap: 1rem;
            }

            .description,
            .credits,
            .project-description p {
                padding: 1rem;
            }
        }

        /* ===== VERSION MOBILE COMPLÈTEMENT REFONDUE ===== */
        
        /* Base mobile optimisée */
        @media (max-width: 768px) {
            body {
                padding-top: 0;
                min-height: 100vh;
                min-height: 100dvh;
                overflow-x: hidden;
            }

            /* Header mobile compact */
            .back-button {
                top: 15px;
                left: 15px;
                width: 45px;
                height: 45px;
                z-index: 1001;
            }

            .language-selector {
                position: fixed;
                top: 15px;
                right: 15px;
                z-index: 1001;
            }

            /* Layout principal mobile */
            .content-section {
                width: 100%;
                height: auto;
                min-height: 100vh;
                min-height: 100dvh;
                padding: 80px 20px 20px 20px;
                margin-top: 0;
                display: flex;
                flex-direction: column;
                gap: 2rem;
                overflow-y: auto;
            }

            /* Titre mobile */
            .title {
                position: static;
                font-size: 2.5rem;
                text-align: center;
                margin: 0 0 2rem 0;
                padding: 1.5rem;
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                border-radius: 15px;
                backdrop-filter: blur(10px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }

            /* Contenu texte mobile */
            .description, .credits, .project-description p {
                position: static;
                width: 100%;
                max-width: 100%;
                padding: 2rem;
                margin: 1rem 0;
                background: rgba(255, 255, 255, 0.95);
                color: #000;
                border-radius: 15px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(10px);
                word-wrap: break-word;
                overflow-wrap: break-word;
                hyphens: auto;
                box-sizing: border-box;
                line-height: 1.6;
                text-align: left;
            }

            .description {
                font-size: 1.1rem;
                font-weight: 400;
            }

            .credits {
                font-size: 1rem;
                font-weight: 300;
                font-style: italic;
            }

            .project-description p {
                font-size: 1.1rem;
                font-weight: 400;
                margin-bottom: 1rem;
            }
        }

        /* Mobile très petit */
        @media (max-width: 480px) {
            .content-section {
                padding: 70px 15px 15px 15px;
                gap: 1.5rem;
            }

            .title {
                font-size: 2rem;
                padding: 1.2rem;
                margin-bottom: 1.5rem;
            }

            .description, .credits, .project-description p {
                padding: 1.5rem;
                margin: 0.8rem 0;
            }

            .description, .project-description p {
                font-size: 1rem;
            }

            .credits {
                font-size: 0.9rem;
            }
        }

        /* Optimisations iOS spécifiques */
        @media screen and (-webkit-min-device-pixel-ratio: 2) {
            .back-button {
                top: 10px;
                left: 10px;
            }

            .language-selector {
                top: 10px;
                right: 10px;
            }

            .content-section {
                padding-top: 70px;
            }
        }

        /* Support orientation paysage mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .content-section {
                padding-top: 60px;
                gap: 1.5rem;
            }

            .title {
                font-size: 2rem;
                margin-bottom: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <a href="landing.html" class="back-button"></a>
    <div class="title" data-i18n="echo_chamber.title">Chambre d'écho</div>
    
    <div class="language-selector">
        <button class="language-button">FR</button>
        <div class="language-dropdown">
            <a href="#" data-lang="fr">Français</a>
            <a href="#" data-lang="en">English</a>
            <a href="#" data-lang="es">Español</a>
            <a href="#" data-lang="ru">Русский</a>
        </div>
    </div>

    <div class="logo-container">
                        <img src="chambre/optimized/assiette.jpg" alt="Logo" class="logo" id="audioToggle">
        <div class="scroll-indicator">
            <div class="scroll-arrow left">↓</div>
            <div class="scroll-arrow center">↓</div>
            <div class="scroll-arrow right">↓</div>
        </div>
    </div>

    <div class="main-content">
        <div class="description">
            <p data-i18n="echo_chamber.description">Installation sonore combinant métal, cordes de guitare électrique, glace et chaînes suspendues.</p>
        </div>

        <div class="content">
            <div class="video-container">
                <video id="currentVideo" class="video" controls>
                    <source src="chambre/vid-b.mp4" type="video/mp4">
                </video>
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWFycm93LXJpZ2h0Ij48bGluZSB4MT0iNSIgeTE9IjEyIiB4Mj0iMTkiIHkyPSIxMiI+PC9saW5lPjxwb2x5bGluZSBwb2ludHM9IjEyIDUgMTkgMTIgMTIgMTkiPjwvcG9seWxpbmU+PC9zdmc+" alt="Flèche" class="arrow" id="nextVideo">
            </div>
        </div>

        <div class="credits">
            <span data-i18n="echo_chamber.diploma">DNSEP (Diplôme National Supérieur d'Expression Plastique), juin 2024</span> – <span data-i18n="echo_chamber.school">École supérieure des Beaux-Arts de Bordeaux</span>
        </div>

        <div class="project-description">
            <p data-i18n="echo_chamber.project_description1">Installation sonore composée de cinq structures en métal construites pour résonner, chacune suspend une plaque métallique traversée par des cordes de guitare électrique, au-dessus une chaîne descend du plafond maintenant un bloc de glace qui fond lentement, les gouttes tombent sur les plaques et chaque impact est capté par un micro piezzo, révélant des sons uniques selon la taille et la tension de chaque structure.</p>
            <p data-i18n="echo_chamber.project_description2">L'ensemble forme une composition évolutive qui commence dans une quasi-absence de son puis devient de plus en plus dense et rythmée au fil de la fonte. Ce travail s'inscrit dans une recherche autour du son de la fin du monde, un son que j'ai cru entendre un jour en montagne face à un glacier en train de craquer, une vibration profonde et sourde qui a traversé toute la vallée et que j'ai depuis tenté de retrouver non par reproduction mais en laissant le temps, la matière et le hasard générer leur propre effondrement sonore.</p>
        </div>

        <div class="gallery">
            <div class="gallery-container">
                <img src="chambre/optimized/ima.jpg" alt="Image 1">
                <img src="chambre/optimized/imb.jpg" alt="Image 2">
                <img src="chambre/optimized/imc.jpg" alt="Image 3">
                <img src="chambre/optimized/ima.jpg" alt="Image 1">
                <img src="chambre/optimized/imb.jpg" alt="Image 2">
                <img src="chambre/optimized/imc.jpg" alt="Image 3">
                <img src="chambre/optimized/ima.jpg" alt="Image 1">
                <img src="chambre/optimized/imb.jpg" alt="Image 2">
                <img src="chambre/optimized/imc.jpg" alt="Image 3">
            </div>
        </div>
    </div>

    <audio id="backgroundAudio" loop>
        <source src="chambre/goute.wav" type="audio/wav">
    </audio>

    <div id="imageModal" class="modal">
        <span class="close-modal">&times;</span>
        <img id="modalImage" src="" alt="Image agrandie">
    </div>

    <script src="translations.js"></script>
    <script src="language-persistence.js"></script>
    <script>
        // Vérification que translations.js est bien chargé
        if (typeof translations === 'undefined') {
            console.error('translations.js n\'est pas chargé correctement');
        }

        const audioToggle = document.getElementById('audioToggle');
        const backgroundAudio = document.getElementById('backgroundAudio');
        const currentVideo = document.getElementById('currentVideo');
        const nextVideo = document.getElementById('nextVideo');
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const closeModal = document.querySelector('.close-modal');
        let isAudioPlaying = false;
        let currentVideoIndex = 0;
        const videos = ['chambre/vid-b.mp4', 'chambre/vid-c.mp4'];

        // Fonction pour changer la langue (maintenant gérée par language-persistence.js)
        window.toggleLanguage = function() {
            const languages = ['fr', 'en', 'es', 'ru'];
            const currentLang = window.languageManager.getCurrentLanguage();
            const currentIndex = languages.indexOf(currentLang);
            const nextLang = languages[(currentIndex + 1) % languages.length];
            window.languageManager.translatePage(nextLang);
        };

        // Gestion des images de la galerie
        document.querySelectorAll('.gallery img').forEach(img => {
            img.addEventListener('click', function() {
                modal.style.display = 'flex';
                modalImg.src = this.src;
            });
        });

        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Gestion de l'audio
        audioToggle.addEventListener('click', () => {
            if (isAudioPlaying) {
                backgroundAudio.pause();
                audioToggle.style.opacity = '0.7';
            } else {
                backgroundAudio.play();
                audioToggle.style.opacity = '1';
            }
            isAudioPlaying = !isAudioPlaying;
        });

        // Gestion des vidéos
        nextVideo.addEventListener('click', () => {
            currentVideoIndex = (currentVideoIndex + 1) % videos.length;
            currentVideo.src = videos[currentVideoIndex];
            currentVideo.load();
            if (currentVideoIndex === 1) {
                currentVideo.classList.add('small');
            } else {
                currentVideo.classList.remove('small');
            }
            currentVideo.play();
        });
    </script>
</body>
</html> 