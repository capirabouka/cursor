<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#ffffff">
    <meta name="msapplication-navbutton-color" content="#ffffff">
    <title>Symphonie du déclin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="translations.js?v=2"></script>
    <script src="script.js"></script>
    <script src="language-persistence.js?v=2"></script>
    <script>
        // S'assurer que la langue est appliquée immédiatement au chargement
        document.addEventListener('DOMContentLoaded', function() {
            // Forcer l'application de la langue stockée
            const currentLang = window.languageManager.getCurrentLanguage();
            window.languageManager.translatePage(currentLang);
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        .back-button::before {
            content: '';
            width: 8px;
            height: 8px;
            border-left: 2px solid rgba(0, 0, 0, 0.8);
            border-bottom: 2px solid rgba(0, 0, 0, 0.8);
            transform: rotate(45deg) translateX(1px);
        }

        .language-selector {
            position: absolute;
            right: 20px;
            top: 20px;
            z-index: 200;
        }

        .language-button {
            background: transparent;
            border: 1px solid #9F7AEA;
            color: #9F7AEA;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .language-button:hover {
            background: rgba(159, 122, 234, 0.1);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #9F7AEA;
            border-radius: 3px;
            padding: 5px 0;
            min-width: 120px;
            display: none;
            backdrop-filter: blur(10px);
        }

        .language-selector:hover .language-dropdown {
            display: block;
        }

        .language-dropdown a {
            display: block;
            padding: 8px 15px;
            color: #ffffff;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .language-dropdown a:hover {
            background: rgba(159, 122, 234, 0.1);
            color: #9F7AEA;
        }

        .title {
            position: fixed;
            top: 20px;
            left: 90px;
            font-size: 32px;
            font-weight: 300;
            color: #000;
            z-index: 200;
            background: none;
            padding: 10px 15px;
            letter-spacing: -0.5px;
            text-transform: uppercase;
            font-family: 'Space Grotesk', sans-serif;
        }

        .audio-section {
            margin-top: 60px;
            padding: 40px 20px;
            text-align: center;
            background: rgba(245, 245, 245, 0.3);
            border-radius: 10px;
            margin-left: 20px;
            margin-right: 20px;
            margin-bottom: 50px;
        }

        .audio-container {
            max-width: 300px;
            margin: 0 auto;
            padding: 1rem;
            background: none;
            border-radius: 0;
        }

        .audio-player {
            display: none;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .play-pause-btn {
            background: none;
            border: none;
            color: #000;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .play-pause-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .audio-progress {
            width: 150px;
            height: 3px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #000;
            width: 0%;
            transition: width 0.1s ease;
        }

        .time-display {
            color: #000;
            font-size: 0.8em;
            min-width: 60px;
        }

        .media-section {
            padding: 0 20px 40px 20px;
            margin-top: 20vh;
        }

        .media-item {
            max-width: 100%;
            margin: 0 auto;
            text-align: center;
        }
        
        .media-item:not(:first-child) {
            margin-top: 120px;
        }

        .media-item img {
            width: 100%;
            max-width: 1200px;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .media-item video {
            width: 100%;
            max-width: 1100px;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .video-section {
            margin-top: 200px;
        }

        .image-container {
            position: relative;
            display: inline-block;
        }

        .arrow {
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            cursor: pointer;
            border-left: 12px solid rgba(0, 0, 0, 0.3);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .arrow:hover {
            border-left-color: rgba(0, 0, 0, 0.6);
            transform: translateY(-50%) translateX(3px);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        /* Système de swipe - styles de base */
        .image-swipe-container {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .image-swipe-wrapper {
            display: flex;
            transition: transform 0.3s ease;
            width: 300%; /* 3 images */
        }

        .swipe-image {
            width: 33.333%; /* Chaque image prend 1/3 de la largeur totale */
            height: auto;
            max-width: 1200px;
            object-fit: contain;
            flex-shrink: 0;
        }

        .swipe-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .indicator.active {
            background: rgba(0, 0, 0, 0.8);
        }

        .indicator:hover {
            background: rgba(0, 0, 0, 0.6);
        }

        .image-container img {
            width: 100%;
            max-width: 1100px;
            height: auto;
            display: block;
            margin: 0 auto;
            transition: opacity 0.3s ease;
        }

        .image-container img.hidden {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
        }

        .image-description {
            text-align: center;
            margin: 50px 0 30px 0;
            font-size: 18px;
            font-weight: 400;
            color: #333;
        }

        .audio-description {
            text-align: center;
            margin: 0 0 30px 0;
            font-size: 18px;
            font-weight: 400;
            color: #333;
        }

        .credits {
            text-align: center;
            margin: 50px 0;
            font-size: 16px;
            color: #666;
            font-style: italic;
        }

        .project-description {
            max-width: 800px;
            margin: 200px auto 80px auto;
            padding: 0 20px;
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            text-align: justify;
            font-family: 'Space Grotesk', sans-serif;
        }

        .project-description p {
            margin: 0 0 20px 0;
        }

        .project-description p:last-child {
            margin-bottom: 0;
        }

        /* Responsive pour mobile - Version optimisée */
        @media (max-width: 768px) {
            /* Optimisation des espacements pour mobile */
            .media-section {
                padding: 0 20px 20px 20px;
                margin-top: 10vh;
            }

            .media-item {
                margin-bottom: 40px;
            }

            .media-item:not(:first-child) {
                margin-top: 60px;
            }

            /* Titre mobile - GARDÉ TEL QUEL comme demandé */
            .title {
                position: fixed;
                top: 20px;
                left: 90px;
                font-size: 32px;
                font-weight: 300;
                color: #000;
                z-index: 200;
                background: none;
                padding: 10px 15px;
                letter-spacing: -0.5px;
                text-transform: uppercase;
                font-family: 'Space Grotesk', sans-serif;
            }

            /* Bouton retour mobile */
            .back-button {
                width: 35px;
                height: 35px;
                top: 20px;
                left: 20px;
            }

            .back-button::before {
                width: 7px;
                height: 7px;
            }

            /* Sélecteur de langue mobile */
            .language-selector {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
            }

            .language-button {
                padding: 4px 8px;
                font-size: 0.8rem;
            }

            /* Images et vidéos mobile - espacements réduits */
            .image-container {
                margin-bottom: 20px;
            }

            .image-container img {
                width: 100%;
                max-width: 100%;
                height: auto;
                max-height: 50vh;
                object-fit: contain;
            }

            /* Système de swipe mobile */
            .image-swipe-container {
                width: 100vw;
                max-width: 100vw;
                overflow: hidden;
                position: relative;
                margin-bottom: 20px;
                margin-left: calc(-50vw + 50%);
            }

            .image-swipe-wrapper {
                display: flex;
                transition: transform 0.3s ease;
                width: 300vw; /* 3 images en pleine largeur */
            }

            .swipe-image {
                width: 100vw; /* Chaque image prend la largeur complète de l'écran */
                height: auto;
                max-height: 50vh;
                object-fit: contain;
                flex-shrink: 0;
            }

            .swipe-indicators {
                display: flex;
                justify-content: center;
                gap: 8px;
                margin-top: 15px;
            }

            .indicator {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: rgba(0, 0, 0, 0.3);
                cursor: pointer;
                transition: background 0.3s ease;
            }

            .indicator.active {
                background: rgba(0, 0, 0, 0.8);
            }

            /* Cacher la flèche sur mobile */
            .arrow {
                display: none !important;
            }

            /* Description mobile - espacements réduits */
            .image-description {
                font-size: 18px;
                line-height: 1.6;
                margin: 20px 0 15px 0;
                color: #333;
                text-align: justify;
                padding: 0;
            }

            /* Crédits mobile - espacements réduits */
            .credits {
                font-size: 16px;
                margin: 15px 0 30px 0;
                color: #666;
                font-style: italic;
                text-align: center;
                padding: 0;
            }

            /* Section vidéo mobile - espacements réduits */
            .video-section {
                margin-top: 60px;
            }

            .video-section .media-item {
                margin-top: 0;
            }

            /* Description du projet mobile - espacements réduits */
            .project-description {
                margin: 40px auto 40px auto;
                padding: 0 20px;
            }

            .project-description p {
                font-size: 18px;
                line-height: 1.8;
                margin: 0 0 15px 0;
                color: #333;
                text-align: justify;
                font-family: 'Space Grotesk', sans-serif;
            }

            .project-description p:last-child {
                margin-bottom: 0;
            }

            /* Audio mobile - espacements réduits */
            .audio-section {
                margin-top: 40px;
                padding: 30px 20px;
                margin-left: 20px;
                margin-right: 20px;
                margin-bottom: 30px;
            }

            .audio-description {
                margin: 0 0 20px 0;
                font-size: 18px;
                color: #333;
            }

            .audio-container {
                max-width: 300px;
                margin: 0 auto;
                padding: 1rem;
            }
        }

        @media (max-width: 480px) {
            /* Optimisation très mobile - espacements encore plus réduits */
            .media-section {
                padding: 0 15px 15px 15px;
                margin-top: 8vh;
            }

            .media-item {
                margin-bottom: 30px;
            }

            .media-item:not(:first-child) {
                margin-top: 40px;
            }

            /* Titre très mobile - GARDÉ TEL QUEL comme demandé */
            .title {
                position: fixed;
                top: 15px;
                left: 70px;
                font-size: 28px;
                font-weight: 300;
                color: #000;
                z-index: 200;
                background: none;
                padding: 8px 12px;
                letter-spacing: -0.5px;
                text-transform: uppercase;
                font-family: 'Space Grotesk', sans-serif;
            }

            .back-button {
                width: 30px;
                height: 30px;
                top: 15px;
                left: 15px;
            }

            .back-button::before {
                width: 6px;
                height: 6px;
            }

            .language-selector {
                top: 15px;
                right: 15px;
            }

            .language-button {
                padding: 3px 6px;
                font-size: 0.75rem;
            }

            /* Images et vidéos très mobile - espacements ultra réduits */
            .image-container {
                margin-bottom: 15px;
            }

            .image-container img {
                max-height: 40vh;
            }

            /* Système de swipe très mobile */
            .image-swipe-container {
                margin-bottom: 15px;
            }

            .swipe-image {
                max-height: 40vh;
            }

            .swipe-indicators {
                margin-top: 10px;
                gap: 6px;
            }

            .indicator {
                width: 6px;
                height: 6px;
            }

            /* Description très mobile - espacements ultra réduits */
            .image-description {
                font-size: 16px;
                line-height: 1.5;
                margin: 15px 0 10px 0;
                color: #333;
                text-align: justify;
                padding: 0;
            }

            /* Crédits très mobile - espacements ultra réduits */
            .credits {
                font-size: 14px;
                margin: 10px 0 20px 0;
                color: #666;
                font-style: italic;
                text-align: center;
                padding: 0;
            }

            /* Section vidéo très mobile - espacements ultra réduits */
            .video-section {
                margin-top: 40px;
            }

            /* Description du projet très mobile - espacements ultra réduits */
            .project-description {
                margin: 30px auto 30px auto;
                padding: 0 15px;
            }

            .project-description p {
                font-size: 16px;
                line-height: 1.7;
                margin: 0 0 10px 0;
                color: #333;
                text-align: justify;
                font-family: 'Space Grotesk', sans-serif;
            }

            /* Audio très mobile - espacements ultra réduits */
            .audio-section {
                margin-top: 30px;
                padding: 20px 15px;
                margin-left: 15px;
                margin-right: 15px;
                margin-bottom: 20px;
            }

            .audio-description {
                margin: 0 0 15px 0;
                font-size: 16px;
                color: #333;
            }
        }

        /* Optimisations pour la barre de tâches mobile */
        @supports (padding: max(0px)) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
        }

        /* Styles pour réduire l'impact de la barre de tâches */
        @media (max-width: 768px) {
            body {
                padding-top: 0;
                min-height: 100vh;
                min-height: 100dvh;
            }

            .back-button {
                top: 10px;
                left: 10px;
            }

            .language-selector {
                top: 10px;
                right: 10px;
            }

            .content-section {
                padding-top: 60px;
                min-height: calc(100vh - 60px);
                min-height: calc(100dvh - 60px);
            }

            .title {
                margin-top: 0;
            }
        }

        /* Optimisations spécifiques pour iOS */
        @media screen and (-webkit-min-device-pixel-ratio: 2) {
            .back-button {
                top: 5px;
                left: 5px;
            }

            .language-selector {
                top: 5px;
                right: 5px;
            }

            .content-section {
                padding-top: 50px;
            }
        }

        /* ===== VERSION MOBILE COMPLÈTEMENT REFONDUE ===== */
        
        /* Base mobile optimisée */
        @media (max-width: 768px) {
            body {
                padding-top: 0;
                min-height: 100vh;
                min-height: 100dvh;
                overflow-x: hidden;
            }

            /* Header mobile compact */
            .back-button {
                top: 15px;
                left: 15px;
                width: 45px;
                height: 45px;
                z-index: 1001;
            }

            .language-selector {
                position: fixed;
                top: 15px;
                right: 15px;
                z-index: 1001;
            }

            /* Layout principal mobile */
            .content-section {
                width: 100%;
                height: auto;
                min-height: 100vh;
                min-height: 100dvh;
                padding: 80px 20px 20px 20px;
                margin-top: 0;
                display: flex;
                flex-direction: column;
                gap: 2rem;
                overflow-y: auto;
            }

            /* Titre mobile */
            .title {
                position: static;
                font-size: 2.5rem;
                text-align: center;
                margin: 0 0 2rem 0;
                padding: 1.5rem;
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                border-radius: 15px;
                backdrop-filter: blur(10px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }

            /* Galerie d'images mobile */
            .image-gallery {
                width: 100%;
                display: grid;
                grid-template-columns: 1fr;
                gap: 2rem;
                margin: 0;
            }

            .image-container {
                width: 100%;
                position: relative;
                border-radius: 15px;
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            }

            .image-container img {
                width: 100%;
                height: auto;
                max-height: 60vh;
                object-fit: cover;
                display: block;
            }

            /* Contenu texte mobile */
            .image-description, .credits, .project-description p, .audio-description {
                position: static;
                width: 100%;
                max-width: 100%;
                padding: 2rem;
                margin: 1rem 0;
                background: rgba(255, 255, 255, 0.95);
                color: #000;
                border-radius: 15px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(10px);
                word-wrap: break-word;
                overflow-wrap: break-word;
                hyphens: auto;
                box-sizing: border-box;
                line-height: 1.6;
                text-align: left;
            }

            .image-description {
                font-size: 1.1rem;
                font-weight: 400;
            }

            .credits {
                font-size: 1rem;
                font-weight: 300;
                font-style: italic;
            }

            .project-description p {
                font-size: 1.1rem;
                font-weight: 400;
                margin-bottom: 1rem;
            }

            .audio-description {
                font-size: 1rem;
                font-weight: 400;
            }

            /* Section audio mobile */
            .audio-section {
                width: 100%;
                padding: 2rem;
                background: rgba(255, 255, 255, 0.95);
                border-radius: 15px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                backdrop-filter: blur(10px);
                margin: 1rem 0;
            }

            .audio-section audio {
                width: 100%;
                margin: 1rem 0;
            }

            .audio-section h3 {
                color: #000;
                font-size: 1.3rem;
                margin-bottom: 1rem;
                text-align: center;
            }
            
            /* Nettoyage des cadres moche sur mobile */
            .title {
                background: transparent !important;
                border-radius: 0 !important;
                backdrop-filter: none !important;
                box-shadow: none !important;
                color: #000 !important;
            }
            
            .image-container {
                border-radius: 0 !important;
                overflow: visible !important;
                box-shadow: none !important;
            }
            
            .image-description, .credits, .project-description p, .audio-description {
                background: transparent !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                backdrop-filter: none !important;
                padding: 1rem !important;
            }
            
            .audio-section {
                background: transparent !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                backdrop-filter: none !important;
                padding: 1rem !important;
            }
        }

        /* Mobile très petit */
        @media (max-width: 480px) {
            .content-section {
                padding: 70px 15px 15px 15px;
                gap: 1.5rem;
            }

            .title {
                font-size: 2rem;
                padding: 1.2rem;
                margin-bottom: 1.5rem;
            }

            .image-gallery {
                gap: 1.5rem;
            }

            .image-container img {
                max-height: 50vh;
            }

            .image-description, .credits, .project-description p, .audio-description, .audio-section {
                padding: 1.5rem;
                margin: 0.8rem 0;
            }

            .image-description, .project-description p {
                font-size: 1rem;
            }

            .credits, .audio-description {
                font-size: 0.9rem;
            }

            .audio-section h3 {
                font-size: 1.2rem;
            }
        }

        /* Optimisations iOS spécifiques */
        @media screen and (-webkit-min-device-pixel-ratio: 2) {
            .back-button {
                top: 10px;
                left: 10px;
            }

            .language-selector {
                top: 10px;
                right: 10px;
            }

            .content-section {
                padding-top: 70px;
            }
        }

        /* Support orientation paysage mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .content-section {
                padding-top: 60px;
                gap: 1.5rem;
            }

            .title {
                font-size: 2rem;
                margin-bottom: 1.5rem;
            }

            .image-gallery {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }

            .image-container img {
                max-height: 40vh;
            }
        }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    <div class="explosion-effect"></div>
    <div class="particles"></div>
    <div class="alarm-effect"></div>
    <audio id="alarmSound" preload="auto">
        <source src="alarme.mp3" type="audio/mpeg">
        <span data-i18n="audio.not_supported">Votre navigateur ne supporte pas l'élément audio.</span>
    </audio>
    
    <a href="landing.html?project=symphonie-declin" class="back-button"></a>
    <div class="title">Symphonie du déclin</div>
    
    <div class="language-selector">
        <button class="language-button">FR</button>
        <div class="language-dropdown">
            <a href="#" data-lang="fr">Français</a>
            <a href="#" data-lang="en">English</a>
            <a href="#" data-lang="es">Español</a>
            <a href="#" data-lang="ru">Русский</a>
        </div>
    </div>



    <div class="media-section">
        <div class="media-item">
            <div class="image-swipe-container">
                <div class="image-swipe-wrapper">
                    <img src="optimized/celle.jpg" alt="Symphonie du déclin" class="swipe-image active">
                    <img src="optimized/bom.jpg" alt="Symphonie du déclin" class="swipe-image">
                    <img src="optimized/bombom.jpg" alt="Symphonie du déclin" class="swipe-image">
                </div>
                <div class="arrow" id="nextImage"></div>
                <div class="swipe-indicators">
                    <span class="indicator active"></span>
                    <span class="indicator"></span>
                    <span class="indicator"></span>
                </div>
            </div>
            <div class="image-description" style="margin-top: 20px;" data-i18n="symphony.installation_description">
                Installation/performance avec des tours de Kapla et un robot aspirateur, accompagnée de la musique « La Symphonie du déclin »
            </div>
            <div class="credits" style="margin-top: 10px;" data-i18n="symphony.credits">
                DNSEP (Diplôme National Supérieur d'Expression Plastique), juin 2024 – École supérieure des Beaux-Arts de Bordeaux
                <div style="text-align: center; margin-top: 65px; font-size: 16px; color: #666; opacity: 0.8;">↓</div>
            </div>
        </div>
        
        <div class="video-section">
            <div class="media-item">
                <iframe src="https://player.vimeo.com/video/1100817664?h=share&title=0&byline=0&portrait=0&autoplay=0&loop=0&color=ffffff" 
                        frameborder="0" 
                        allow="autoplay; fullscreen; picture-in-picture" 
                        allowfullscreen
                        style="width: 100%; max-width: 1400px; height: auto; min-height: 550px;">
                </iframe>
            </div>
        </div>
        
        <div class="project-description" style="margin-top: 80px; padding: 0 20px;">
            <p data-i18n="symphony.project_description1">Dans ce projet sonore collectif, j'ai invité des personnes venues des quatre coins du monde à imaginer leur propre scénario d'apocalypse. Mais pas avec des mots, avec des sons.</p>
            <p data-i18n="symphony.project_description2">Chacun·e a pris le temps de mimer vocalement ce à quoi ressemblerait, pour lui ou elle, le bruit de la fin. Explosion, silence, râle, rires, grondements, soupirs... De cette matière brute, j'ai composé une symphonie absurde qui rassemble ces visions personnelles du déclin.</p>
            <p data-i18n="symphony.project_description3">L'installation est accompagnée d'un robot aspirateur qui, de façon mécanique et dérisoire, fait s'effondrer des tours de Kapla. Une métaphore désorientée du monde qui s'écroule, mais sans haine, sans rage, comme une farce à laquelle on assiste, un peu bête, un peu ému·e.</p>
        </div>
    </div>

    <div class="audio-section">
        <div class="audio-description" data-i18n="symphony.audio_description">
            Son utilisé lors de l'installation/performance, diffusé par le robot aspirateur.
        </div>
        <div class="audio-container">
            <audio class="audio-player" controlsList="nodownload" preload="auto">
                <source src="symphonie de la fin du monde.mp3" type="audio/mpeg">
                <span data-i18n="audio.not_supported">Votre navigateur ne supporte pas l'élément audio.</span>
            </audio>
            <div class="audio-controls">
                <button class="play-pause-btn">
                    <span class="play-icon">▶</span>
                    <span class="pause-icon" style="display: none;">❚❚</span>
                </button>
                <div class="audio-progress">
                    <div class="progress-bar"></div>
                </div>
                <div class="time-display">
                    <span>0:00</span> / <span>0:00</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gestion de l'audio pour La symphonie du Déclin
        document.addEventListener('DOMContentLoaded', function() {
            const audioPlayer = document.querySelector('.audio-player');
            const playPauseBtn = document.querySelector('.play-pause-btn');
            const playIcon = document.querySelector('.play-icon');
            const pauseIcon = document.querySelector('.pause-icon');
            const progressBar = document.querySelector('.progress-bar');
            const timeDisplay = document.querySelector('.time-display').children;

            playPauseBtn.addEventListener('click', function() {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'inline';
                } else {
                    audioPlayer.pause();
                    playIcon.style.display = 'inline';
                    pauseIcon.style.display = 'none';
                }
            });

            audioPlayer.addEventListener('timeupdate', function() {
                const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                progressBar.style.width = progress + '%';
                
                // Mise à jour du temps
                const currentMinutes = Math.floor(audioPlayer.currentTime / 60);
                const currentSeconds = Math.floor(audioPlayer.currentTime % 60);
                const durationMinutes = Math.floor(audioPlayer.duration / 60);
                const durationSeconds = Math.floor(audioPlayer.duration % 60);
                
                timeDisplay[0].textContent = `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')}`;
                timeDisplay[1].textContent = `${durationMinutes}:${durationSeconds.toString().padStart(2, '0')}`;
            });

            // Système de swipe pour les images
            initImageSwipe();
        });

        // Le gestionnaire de langue est maintenant géré par language-persistence.js
        // La langue est appliquée automatiquement au chargement via language-persistence.js

        // Système de swipe tactile pour les images
        function initImageSwipe() {
            const swipeWrapper = document.querySelector('.image-swipe-wrapper');
            const indicators = document.querySelectorAll('.indicator');
            let currentIndex = 0;
            let startX = 0;
            let currentX = 0;
            let isDragging = false;

            // Fonction pour aller à une image spécifique
            function goToImage(index) {
                currentIndex = index;
                let translateX;
                
                // Sur mobile, utiliser vw, sur desktop utiliser %
                if (window.innerWidth <= 768) {
                    translateX = -index * 100; // 100vw par image
                    swipeWrapper.style.transform = `translateX(${translateX}vw)`;
                } else {
                    translateX = -index * 33.333; // 33.333% par image
                    swipeWrapper.style.transform = `translateX(${translateX}%)`;
                }
                
                // Mettre à jour les indicateurs
                indicators.forEach((indicator, i) => {
                    indicator.classList.toggle('active', i === index);
                });
            }

            // Gestionnaires d'événements tactiles
            swipeWrapper.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                isDragging = true;
                swipeWrapper.style.transition = 'none';
            }, { passive: false });

            swipeWrapper.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                currentX = e.touches[0].clientX;
                const diffX = currentX - startX;
                let translateX;
                
                if (window.innerWidth <= 768) {
                    translateX = -currentIndex * 100 + (diffX / window.innerWidth) * 100;
                    swipeWrapper.style.transform = `translateX(${translateX}vw)`;
                } else {
                    translateX = -currentIndex * 33.333 + (diffX / swipeWrapper.offsetWidth) * 33.333;
                    swipeWrapper.style.transform = `translateX(${translateX}%)`;
                }
            }, { passive: false });

            swipeWrapper.addEventListener('touchend', function(e) {
                if (!isDragging) return;
                isDragging = false;
                
                const diffX = currentX - startX;
                const threshold = swipeWrapper.offsetWidth * 0.2; // 20% de la largeur pour déclencher le swipe
                
                swipeWrapper.style.transition = 'transform 0.3s ease';
                
                if (Math.abs(diffX) > threshold) {
                    if (diffX > 0 && currentIndex > 0) {
                        // Swipe vers la droite
                        goToImage(currentIndex - 1);
                    } else if (diffX < 0 && currentIndex < 2) {
                        // Swipe vers la gauche
                        goToImage(currentIndex + 1);
                    } else {
                        // Retour à la position actuelle
                        goToImage(currentIndex);
                    }
                } else {
                    // Retour à la position actuelle
                    goToImage(currentIndex);
                }
            });

            // Gestionnaires d'événements souris pour desktop
            swipeWrapper.addEventListener('mousedown', function(e) {
                startX = e.clientX;
                isDragging = true;
                swipeWrapper.style.transition = 'none';
                e.preventDefault();
            });

            swipeWrapper.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                
                currentX = e.clientX;
                const diffX = currentX - startX;
                let translateX;
                
                if (window.innerWidth <= 768) {
                    translateX = -currentIndex * 100 + (diffX / window.innerWidth) * 100;
                    swipeWrapper.style.transform = `translateX(${translateX}vw)`;
                } else {
                    translateX = -currentIndex * 33.333 + (diffX / swipeWrapper.offsetWidth) * 33.333;
                    swipeWrapper.style.transform = `translateX(${translateX}%)`;
                }
            });

            swipeWrapper.addEventListener('mouseup', function(e) {
                if (!isDragging) return;
                isDragging = false;
                
                const diffX = currentX - startX;
                const threshold = swipeWrapper.offsetWidth * 0.2;
                
                swipeWrapper.style.transition = 'transform 0.3s ease';
                
                if (Math.abs(diffX) > threshold) {
                    if (diffX > 0 && currentIndex > 0) {
                        goToImage(currentIndex - 1);
                    } else if (diffX < 0 && currentIndex < 2) {
                        goToImage(currentIndex + 1);
                    } else {
                        goToImage(currentIndex);
                    }
                } else {
                    goToImage(currentIndex);
                }
            });

            // Empêcher la sélection de texte pendant le swipe
            swipeWrapper.addEventListener('selectstart', function(e) {
                e.preventDefault();
            });

            // Gestionnaires pour les indicateurs (clics)
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', function() {
                    goToImage(index);
                });
            });

            // Initialiser la première image
            goToImage(0);

            // Gestion de la flèche pour desktop
            const nextImage = document.getElementById('nextImage');
            if (nextImage) {
                nextImage.addEventListener('click', function() {
                    const nextIndex = (currentIndex + 1) % 3;
                    goToImage(nextIndex);
                });
            }
        }
    </script>
</body>
</html> 